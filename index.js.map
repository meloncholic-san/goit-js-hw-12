{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nexport const refs = {\n    form: document.querySelector('.search-form'),\n    input: document.querySelector('input[name=\"searchQuery\"]'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'), \n    loadMore: document.querySelector('.load-more'),\n};\n\n\nexport function renderGallery(hits, append = false) {\n    const markup = hits.map(renderMarkup).join(\"\");\n\n    if (append) {\n        refs.gallery.insertAdjacentHTML(\"beforeend\", markup); \n    } else {\n        refs.gallery.innerHTML = markup;\n    }\n}\nfunction renderMarkup(hit) {\n    return `\n    <div class=\"photo-card\">\n        <a class=\"card-link\" href=\"${hit.largeImageURL}\">\n            <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n            <p class=\"info-item\"><b>Likes</b> <span>${hit.likes}</span></p>\n            <p class=\"info-item\"><b>Views</b> <span>${hit.views}</span></p>\n            <p class=\"info-item\"><b>Comments</b> <span>${hit.comments}</span></p>\n            <p class=\"info-item\"><b>Downloads</b> <span>${hit.downloads}</span></p>\n        </div>\n    </div>`;\n}\n","import axios from \"axios\";\nimport { refs } from './render-functions';\n\nconst API_KEY = '47870617-7ec65d65554e9e3e1b4aa2202';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default async function getQuery(query, page) {\n\n    refs.loader.classList.remove(\"hidden\"); \n    refs.loadMore.classList.add(\"hidden\");\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page: page\n            }\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error(\"âŒ Error fetching data:\", error);\n        throw error;\n    } finally {\n        refs.loader.classList.add(\"hidden\");\n    }\n}","import { refs, renderGallery } from './js/render-functions';\nimport getQuery from \"./js/pixabay-api\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet query = null;\nlet page = null;\n\nrefs.form.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = refs.input.value.trim();\n    page = 1;\n    if (!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search query!',\n            position: 'topRight',\n            timeout: 3000\n        });\n        return;\n    }\n\n    refs.gallery.innerHTML = '';\n\n    try {\n        const response = await getQuery(query,page);\n        const hits = response.hits;\n        console.log(response)\n        if (!hits || hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                position: 'topRight',\n                timeout: 3000\n            });\n            return;\n        }\n\n        renderGallery(hits);\n        lightBoxGallery.refresh();\n        refs.loadMore.classList.remove('hidden');\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n            timeout: 3000\n        });\n    }\n});\n\nconst lightBoxGallery = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n    animationSpeed: 300,\n    enableKeyboard: true,\n});\n\n\n\n\nrefs.loadMore.addEventListener('click', loadMoreHandler);\n\nasync function loadMoreHandler(event) {\n    page+=1;\n    event.preventDefault();\n    refs.loadMore.classList.add('hidden');\n    try {\n        const response = await getQuery(query,page);\n        const hits = response.hits;\n\n        if (!hits || hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                position: 'topRight',\n                timeout: 3000\n            });\n            return;\n        }\n\n        renderGallery(hits, true);\n        lightBoxGallery.refresh();\n        scrollToNewImages();\n        refs.loadMore.classList.remove('hidden');\n\n        if (page * 15 >= response.totalHits) {\n            refs.loadMore.classList.add(\"hidden\");\n\n            iziToast.warning({\n                title: 'Warning',\n                message: \"We`re sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                timeout: 3000\n            });\n        }\n\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later!',\n            position: 'topRight',\n            timeout: 3000\n        });\n    }\n}\n\n\nfunction scrollToNewImages() {\n        const { height } = document.querySelector('.photo-card').getBoundingClientRect();\n        window.scrollBy({ top: height*2, behavior: 'smooth' });\n}"],"names":["refs","renderGallery","hits","append","markup","renderMarkup","hit","API_KEY","BASE_URL","getQuery","query","page","axios","error","event","iziToast","response","lightBoxGallery","SimpleLightbox","loadMoreHandler","scrollToNewImages","height"],"mappings":"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"}